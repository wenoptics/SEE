<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Scale Comparison Browser</title>

    <style>
        body, html {
            margin: 0;
            padding: 0;
        }

        .swiper-container {
            width: 100%;
            /*margin-left: auto;*/
            /*margin-right: auto;*/
        }

        .swiper-container#swiper-container-h {
            height: 100%;
            position: fixed;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            /*background: #fff;*/
            overflow: hidden;

            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }

        .swiper-slide-h {
            /*background-color: #dedede;*/
        }

        .swiper-container-v {
            height: 100vh;
        }

        .slide-v-container {
            /*height: 90%;*/
            border-width: 5px;
            border-style: solid;
            border-color: white;
            background-color: white;
            box-shadow: 0 0 10px 0 #8080806e;
        }

        .slide-img {
            height: 300px;
            width: 300px;
            object-fit: cover
        }

        @media only screen and (max-width: 640px) {
            /*600px and down*/
            .slide-img {
                height: 45vw;
                width: 45vw;
            }
        }
        @media only screen and (min-width: 640px) {
            /*640px and up*/
            .slide-img {
                height: 20vw;
                width: 20vw;
            }
        }
        @media only screen and (min-width: 1024px) {
            /*1440px and up*/
            .slide-img {
                height: 14vw;
                width: 14vw;
            }
        }

        .dot-bg {
            position: fixed;
            background:
                linear-gradient(90deg, #FBFBFB 19px, transparent 1%) center,
                linear-gradient(#FBFBFB 19px, transparent 1%)
                center,
                #E4E4E4;
            background-size: 22px 22px;
            /*enlarge the bg so that we can make some effect*/
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
        }

        .float-text {
            position: absolute;
            top: 17vh;
            left: 6vw;
            width: 30vw;
            z-index: 10000;
        }

        .float-text--content {
            position: relative;
            background-color: #ffffff99;
            /* padding-top: 10px; */
            padding: 10px;
            top: -10px;
            left: 20px;
            height: 20vh;
            border-style: solid;
            border-color: #00000033;
        }

        .float-text--header {
            padding-left: 0.5em;
            font-family: sans-serif;
            color: white;
            background-color: #77777745;
            text-shadow: #533d4a 1px 1px, #533d4a 2px 2px, #533d4a 3px 3px, #533d4a 4px 4px, #533d4a 5px 5px, #533d4a 6px 6px;
        }

        .nav-arrow {
            z-index: 10000;
            position: fixed;
            width: 2vw;
        }
    </style>

    <link rel="stylesheet" href="css/swiper.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

</head>
<body>

<!-- Navbar (sit on top) -->
<div class="w3-top" style="z-index: 10000">
    <div class="w3-bar w3-white w3-wide w3-padding w3-card">
        <a href="#" class="w3-bar-item w3-button"><b></b> Speculative Explorer </a>
        <!-- Float links to the right. Hide them on small screens -->
        <div class="w3-right w3-hide-small">
            <a href="#about" class="w3-bar-item w3-button">About</a>
        </div>
    </div>
</div>

<div>


    <div class='dot-bg'></div>

    <!--Text and note goes here-->
    <div class="float-text">
        <h2 class="float-text--header">Powers of Ten</h2>
        <div class="float-text--content">
            it is the product fossilized trees in scale 1 and  makes up the base of the ...
        </div>
    </div>

    <!--Nav Arrows-->
    <div class="nav-arrow" id="arrow-right">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 492.004 492.004" style="enable-background:new 0 0 492.004 492.004;" xml:space="preserve"><g>	<g>		<path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12			c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028			c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265			c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
    </div>
    <div class="nav-arrow" id="arrow-left" style="transform: rotate(180deg);">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 492.004 492.004" style="enable-background:new 0 0 492.004 492.004;" xml:space="preserve"><g>	<g>		<path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12			c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028			c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265			c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
    </div>
    <div class="nav-arrow" id="arrow-up" style="transform: rotate(-90deg);">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 492.004 492.004" style="enable-background:new 0 0 492.004 492.004;" xml:space="preserve"><g>	<g>		<path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12			c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028			c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265			c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
    </div>
    <div class="nav-arrow" id="arrow-down" style="transform: rotate(90deg)">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"	 viewBox="0 0 492.004 492.004" style="enable-background:new 0 0 492.004 492.004;" xml:space="preserve"><g>	<g>		<path d="M382.678,226.804L163.73,7.86C158.666,2.792,151.906,0,144.698,0s-13.968,2.792-19.032,7.86l-16.124,16.12			c-10.492,10.504-10.492,27.576,0,38.064L293.398,245.9l-184.06,184.06c-5.064,5.068-7.86,11.824-7.86,19.028			c0,7.212,2.796,13.968,7.86,19.04l16.124,16.116c5.068,5.068,11.824,7.86,19.032,7.86s13.968-2.792,19.032-7.86L382.678,265			c5.076-5.084,7.864-11.872,7.848-19.088C390.542,238.668,387.754,231.884,382.678,226.804z"/>	</g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
    </div>

    <!-- Slider main container -->
    <div class="swiper-container" id="swiper-container-h">
        <!-- Additional required wrapper -->
        <div class="swiper-wrapper">
            <!-- Slides -->
            <div class="swiper-slide swiper-slide-h" data-hash="slide1">Slide 1</div>
            <div class="swiper-slide swiper-slide-h" data-hash="slide2"style="background-color: darkgray">Slide 3</div>
            <div class="swiper-slide swiper-slide-h">
                <div class="swiper-container" id="sw3" style="height: 600px;">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-4.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-3.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-2.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-1.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/0.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/1.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/2.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/3.jpg" /></div>
                        <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/4.jpg" /></div>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                </div>
            </div>
            <div class="swiper-slide swiper-slide-h">Slide 2</div>
            <div class="swiper-slide swiper-slide-h">
                <span id="move">See it moves</span>
            </div>
            <div class="swiper-slide swiper-slide-h">
                <div style="
                position: relative;
                width: 50%;
                height: 50%;
                background-color: wheat;
                border-color: black;
            "><button onclick="alert('yo')">hey</button></div>
            </div>
            <div class="swiper-slide swiper-slide-h">
                <div class="swiper-wrapper" id="sw2">
                    <div class="swiper-wrapper">
                        <div class="swiper-slide swiper-slide-v">
                            <div class="slide-v-container">Vertical Slide 1</div>
                        </div>
                        <div class="swiper-slide swiper-slide-v">
                            <div class="slide-v-container">Vertical Slide 1</div>
                        </div>
                        <div class="swiper-slide swiper-slide-v">
                            <div class="slide-v-container">Vertical Slide 1</div>
                        </div>
                        <div class="swiper-slide swiper-slide-v">
                            <div class="slide-v-container">Vertical Slide 1</div>
                        </div>
                        <div class="swiper-slide swiper-slide-v">
                            <div class="slide-v-container">Vertical Slide 1</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="swiper-slide swiper-slide-h">Slide 2</div>
            <div class="swiper-slide swiper-slide-h">Slide 2</div>
            <div class="swiper-slide swiper-slide-h">Slide 2</div>
            <div class="swiper-slide swiper-slide-h">Slide 2</div>
        </div>

        <!-- If we need scrollbar -->
        <div class="swiper-scrollbar"></div>
    </div>


</div>


<script src="https://unpkg.com/animejs@3.0.0/lib/anime.min.js"></script>
<script src="js/swiper.js"></script>

<script>

    // Helper function to render a dom HTML string
    function render(domHtmlString, targetNode) {
        targetNode.innerHTML = domHtmlString;
    }

    // Helper function to append html dom to a parent
    function appendDom(parentNode, domHtmlString) {
        // const _wrap = document.createElement('div');
        // render(domHtmlString, _wrap);
        // parentNode.appendChild(_wrap);
        parentNode.innerHTML += domHtmlString;
    }

    // Helper function to join path
    function pathJoin(parts, sep){
        var separator = sep || '/';
        var replace = new RegExp(separator+'{1,}', 'g');
        return parts.join(separator).replace(replace, separator);
    }

    // Helper function to auto append 'px'
    function px_(s) {
        return s + 'px';
    }

    function loadImgData(setPath, imageSetData) {
        var ecosysContainer = document.querySelector('div#swiper-container-h').querySelector('.swiper-wrapper');

        // Remove the demo data filled
        while(ecosysContainer.firstChild){
            ecosysContainer.removeChild(ecosysContainer.firstChild);
        }

        for (var setIdx = 0; setIdx < imageSetData.length; setIdx++) {
            var ecoInnerSlideList = '';
            for (var i=0; i<imageSetData[setIdx].imageList.length; i++) {
                const imgPath = pathJoin([setPath, imageSetData[setIdx].path, imageSetData[setIdx].imageList[i]]);
                ecoInnerSlideList +=
                    '<div class="swiper-slide swiper-slide-v">' +
                    '   <div class="slide-v-container">' +
                    '       <img class="slide-img" src="'+ imgPath +'"  alt=""/>' +
                    '   </div>' +
                    '</div>';
            }

            const slideId = 'slide-' + setIdx;
            appendDom(ecosysContainer,
                '<div class="swiper-slide swiper-slide-h" data-hash="' + slideId + '">' +
                '    <div class="swiper-container swiper-container-v" id="'+slideId+'">' +
                '        <div class="swiper-wrapper">' +
                            ecoInnerSlideList +
                // '            <div class="swiper-slide swiper-slide-v">' +
                // '               <img class="slide-v-container" src="res/image_set/Powers of Ten/images/-4.jpg" />' +
                // '            </div>' +
                '        </div>' +
                // '        <!-- Add Pagination -->' +
                // '        <div class="swiper-pagination"></div>' +
                '    </div>' +
                '</div>');

            /*swipers.push(new Swiper('#'+slideId, {
                direction: 'vertical',
                effect: 'coverflow',
                slidesPerView: 3,
                // grabCursor: true,
                centeredSlides: true,
                spaceBetween: 5,
                coverflowEffect: {
                    rotate: 20,
                    stretch: 40,
                    depth: 500,
                    modifier: 1,
                    slideShadows : false,
                },
            }));*/
        }

    }

    const imageSetData = [
        {
            name: 'Dune',
            path: 'Dune/Dune Scale Project Images/',
            imageList: [
                '10^-9 DNA molecule.jpg',
                '10^-8 DNA molecule.jpg',
                '10^-7 chromosome.jpg',
                '10^-6 cell nucleus.jpg',
                '10^-5 nucleus.jpg',
                '10^-3 Skull.jpg',
                '10^-2 skin.jpg',
                '10^-1 face.jpg',
                '10^0 human body.jpg',
                '10^1 Paul on worm.jpg',
                '10^2 field.jpg',
                '10^3 Arrakis.jpg',
                '10^4 Freeman culture.jpg',
                '10^5 Melange.jpg',
                '10^6 geology landscape.jpg',
                '10^7 Arrakis.jpg',
                '10^8 Arrakis & Moons.jpg',
                '10^9 two moons orbits.jpg',
                '10^10 Arrakis Orbit.jpg',
                '10^11 Inner Solar System.jpg',
                '10^12 Inner Solar System.jpg',
                '10^13 Solar System.jpg',
                '10^14 Dust Cloud.jpg',
            ]
        },
        {
            name: 'Nausicaa,toxic jungle',
            path: 'Nausicaa,toxic jungle/',
            imageList: [
                '-1.png',
                '0.PNG',
                '1.PNG',
                '2.PNG',
                '3.PNG',
                '4.PNG',
            ]
        },
        {
            name: 'Powers of Ten',
            path: 'Powers of Ten/images/',
            imageList: [
                '-16.jpg', '-15.jpg', '-14.jpg', '-13.jpg', '-12.jpg', '-11.jpg', '-10.jpg', '-9.jpg', '-8.jpg',
                '-7.jpg', '-6.jpg', '-5.jpg', '-4.jpg', '-3.jpg', '-2.jpg', '-1.jpg',
                '0.jpg',
                '1.jpg',
                '2.jpg',
                '3.jpg',
                '4.jpg',
                '5.jpg',
                '6.jpg',
                '7.jpg',
                '8.jpg',
                '9.jpg',
                '10.jpg',
                '11.jpg',
                '12.jpg',
                '13.jpg',
                '14.jpg',
                '15.jpg',
                '16.jpg',
                '17.jpg',
                '18.jpg',
                '19.jpg',
                '20.jpg',
                '21.jpg',
                '22.jpg',
                '23.jpg',
                '24.jpg',
            ]
        }
    ];
    const _testImgSet = imageSetData.concat(imageSetData).concat(imageSetData);
    loadImgData('res/image_set', _testImgSet);

    ecoSlides = [];
    for (var i = 0; i < _testImgSet.length; i++) {
        const sp = new Swiper('#slide-'+i, {
            direction: 'vertical',
            effect: 'coverflow',
            slidesPerView: 2,
            // grabCursor: true,
            centeredSlides: true,
            spaceBetween: 5,
            slideToClickedSlide: true,
            coverflowEffect: {
                rotate: 25,
                stretch: 90,
                depth: 600,
                modifier: 1,
                slideShadows : false,
            },
            on: {
                init: function () {
                    this.allowTouchMove = false;
                    this.coverflowEffect.transitToTranslate(0);
                    this.el.style.opacity = 1;

                    for (var i = 0; i < this.slides.length; i++) {
                        const el = this.slides[i].querySelector('.slide-img');
                        el.addEventListener('mouseenter', function (evt) {
                            if (this === document.querySelector('' +
                                '.swiper-slide-h.swiper-slide-active ' +
                                '.swiper-slide-v.swiper-slide-active ' +
                                '.slide-img')) {
                                console.log('mouse in');
                                arrowAct.show(this);
                            }
                        });
                        el.addEventListener('mouseleave', function (evt) {
                            if (this === document.querySelector('' +
                                '.swiper-slide-h.swiper-slide-active ' +
                                '.swiper-slide-v.swiper-slide-active ' +
                                '.slide-img')) {
                                console.log('mouse out');
                                arrowAct.hide();
                            }
                        });
                    }
                }
            },
            touchStart: function (evt) {}
        });

        sp.anim = {
            collapse: function () {
                anime({
                    targets: sp,
                    ttTranslateValue: 0,
                    elasticity: 200,
                    duration: 600,
                    easing: 'easeInBack',
                    autoplay: true,
                    update: function () {
                        sp.coverflowEffect.updateTtTranslate();
                    }
                });
            },
            expand: function () {
                anime({
                    targets: sp,
                    ttTranslateValue: 1,
                    elasticity: 200,
                    duration: 450,
                    easing: 'easeInOutSine',
                    autoplay: true,
                    update: function() {
                        sp.coverflowEffect.updateTtTranslate();
                    }
                });
            }
        };

        ecoSlides.push(sp);
    }

    const arrowAct = {
        el: {
            up   : document.querySelector('#arrow-up'),
            down : document.querySelector('#arrow-down'),
            left : document.querySelector('#arrow-left'),
            right: document.querySelector('#arrow-right'),
        },
        width: document.querySelector('.nav-arrow').getBoundingClientRect().width,
        height: document.querySelector('.nav-arrow').getBoundingClientRect().height,
        hide: function () {
            // this.el.up   .style.display = 'none';
            // this.el.down .style.display = 'none';
            // this.el.left .style.display = 'none';
            // this.el.right.style.display = 'none';
            this.anim.out();
        },
        show: function (el) {
            // this.el.up   .style.display = 'block';
            // this.el.down .style.display = 'block';
            // this.el.left .style.display = 'block';
            // this.el.right.style.display = 'block';
            if (el) {
                // re-position the arrows
                const rct = el.getBoundingClientRect();
                this.el.up   .style.left = px_(rct.left + rct.width / 2 - this.width  /2);
                this.el.up   .style.top = px_(rct.top                   - this.height /2);
                this.el.down .style.left = px_(rct.left + rct.width / 2 - this.width  /2);
                this.el.down .style.top = px_(rct.bottom                - this.height /2);
                this.el.left .style.left = px_(rct.left                 - this.width  /2);
                this.el.left .style.top = px_(rct.top + rct.height / 2  - this.height /2);
                this.el.right.style.left = px_(rct.right                - this.width  /2);
                this.el.right.style.top = px_(rct.top + rct.height / 2  - this.height /2);
            }
            this.anim.in();
        },
        anim: {
            in: function () {
                arrowActAnim.restart();
            },
            out: function () {
                arrowActAnim.seek(arrowActAnim.duration - 1);
                arrowActAnim.reverse();
                arrowActAnim.play();
            }
        }
    };

    arrowActAnim = anime({
        targets: [arrowAct.el.up, arrowAct.el.down, arrowAct.el.left, arrowAct.el.right],
        translateX: [20, 0],  // Since we've already rotated them, we can simple translate by X.
        opacity: [0, 1],
        duration: 400,
        easing: 'easeInBack',
        autoplay: false
    });
    arrowAct.hide();

    lastActiveSlideId = null;

    // init the swiper
    var swiperEco = new Swiper('#swiper-container-h', {
        speed: 400,
        initialSlide: 1,
        centeredSlides: true,
        slideToClickedSlide: true, //click on any slide will produce transition to this slide
        keyboard: {
            enabled: true,
        },
        mousewheel: {
            invert: false,
            releaseOnEdges: true
        },
        hashNavigation: {
            watchState: true,
        },
        scrollbar: {
            el: '.swiper-scrollbar',
            draggable: true,
        },
        // Responsive breakpoints
        slidesPerView: 6,
        spaceBetween: 20,
        breakpoints: {
            1024: {
                slidesPerView: 4,
                spaceBetween: 20,
            },
            640: {
                slidesPerView: 2,
                spaceBetween: 15,
            }
        },
        on: {
            progress: function (progress) {
                console.log('on "progress":' + progress);
                if (this.canPlayLRAnim === true) {
                    if (lastActiveSlideId === null) {return}
                    const swiper = this;
                    // left-right animation -- collapse
                    anime({
                        targets: '.swiper-slide-h',
                        autoplay: true,
                        translateX: 0,
                        scale: 1,
                        duration: 100,
                        easing: 'easeInOutSine',
                        delay: function(el, i, l) {
                            return Math.abs(i-swiper.realIndex) * 100;
                        },
                    });
                    this.canPlayLRAnim = false;
                }
            },
            transitionEnd: function() {
                console.log('on transitionEnd: realIndex=' + this.realIndex + ' lastActiveSlideId='+lastActiveSlideId);
                if (lastActiveSlideId === null) {return}

                this.canPlayLRAnim = true;
                const swiper = this;
                // left-right animation -- expand
                anime({
                    targets: '.swiper-slide-h',
                    autoplay: true,
                    translateX: function (el, i, l) {
                        return Math.sign(i - swiper.realIndex) * (30);
                    },
                    scale: function (el, i, l) {
                        return (1 - Math.abs(i - swiper.realIndex) * 0.1);
                    },
                    opacity: function (el, i, l) {
                        if (i === swiper.realIndex) return 1;
                        return .6
                    },
                    duration: 500,
                    easing: 'easeInOutSine',
                    delay: function(el, i, l) {
                        return Math.abs(i-swiper.realIndex) * 100;
                    },
                });

                if (lastActiveSlideId !== this.realIndex) {
                    // actually move changed slides

                    // Deactivate the current (previous) ecosys
                    ecoSlides[lastActiveSlideId].allowTouchMove = false;
                    ecoSlides[lastActiveSlideId].anim.collapse();

                    // Activate the current
                    ecoSlides[this.realIndex].allowTouchMove = true;
                    ecoSlides[this.realIndex].anim.expand();

                    // Text animation
                    anime({
                        targets: ['.float-text--header', '.float-text--content'],
                        translateX: [-100, 0],
                        opacity: [0, 1],
                        delay: anime.stagger(100),
                        autoplay: true
                    });
                }

                lastActiveSlideId = this.realIndex;
            },
            init: function() {
                const startSlide = this.realIndex || this.params.initialSlide;
                console.log('on init: "startSlide" = ' + startSlide);

                ecoSlides[startSlide].allowTouchMove = true;
                ecoSlides[this.realIndex].anim.expand();

                lastActiveSlideId = startSlide;
            }
        }
    });

    /*new Swiper('.swiper-container-v', {
        direction: 'vertical',
        effect: 'coverflow',
        slidesPerView: 3,
        // grabCursor: true,
        centeredSlides: true,
        spaceBetween: 5,
        coverflowEffect: {
            rotate: 20,
            stretch: 40,
            depth: 500,
            modifier: 1,
            slideShadows: false,
        },
    });*/

    /*// Test a basic animation
    var animation = anime({
        targets: '#move',
        translateY: 20,
        elasticity: 200,
        easing: 'easeInOutSine',
        autoplay: false
    });
    animation.seek(0.5 * animation.duration);
*/

    const el_fText = document.querySelector('.float-text');
    const el_dotBg = document.querySelector('div.dot-bg');

    document.body.onmousemove = function(evt) {
        const halfH = document.documentElement.clientHeight /2;
        const halfW = document.documentElement.clientWidth /2;

        var pdx = 1 - evt.clientX / halfW;
        var pdy = 1 - evt.clientY / halfH;

        // console.log( evt.clientX + "," + evt.clientY
        //     + " | " + dx + "," + dy
        //     + " | " + pdx + "," + pdy);

        el_dotBg.style.transform =
            ' rotateX('+pdx*5+'deg) rotateY('+pdy*5+'deg)' +
            ' skew('+-pdy*5+'deg,'+-pdx*5+'deg)';

        // Dynamic effects on the text
        const sz = el_fText.getBoundingClientRect();
        pdx = (sz.x + sz.width / 2 - event.clientX) / document.documentElement.clientWidth;
        pdy = (sz.y + sz.height / 2 - event.clientY) / document.documentElement.clientHeight;
        el_fText.style.transform =
            ' rotateX('+pdy*15+'deg) rotateY('+pdx*15+'deg)' +
            ' skew(-10deg)';
    };

    document.body.onmousedown = function (evt) {
        console.log('onmousedown');
    };


</script>

</body>
</html>
