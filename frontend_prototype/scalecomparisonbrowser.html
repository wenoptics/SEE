<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Scale Comparison Browser</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            position: relative;

        }

        .swiper-container {
            width: 100%;
            height: 300px;
            margin-left: auto;
            margin-right: auto;
        }

        .swiper-container#swiper-container-h {
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            /*background: #fff;*/
            overflow: hidden;

            /* Center slide text vertically */
            display: -webkit-box;
            display: -ms-flexbox;
            display: -webkit-flex;
            display: flex;
            -webkit-box-pack: center;
            -ms-flex-pack: center;
            -webkit-justify-content: center;
            justify-content: center;
            -webkit-box-align: center;
            -ms-flex-align: center;
            -webkit-align-items: center;
            align-items: center;
        }

        .swiper-slide-h {
            /*background-color: #dedede;*/
        }

        .swiper-container-v {
            height: 400px;
        }

        .slide-v-container {
            width: 100px;
            border-width: 5px;
            border-style: solid;
            border-color: white;
            box-shadow: 0 0 10px 0 #8080806e;
        }
    </style>

    <link rel="stylesheet" href="css/swiper.css">

</head>
<body>

<!-- Slider main container -->
<div class="swiper-container" id="swiper-container-h">
    <!-- Additional required wrapper -->
    <div class="swiper-wrapper">
        <!-- Slides -->
        <div class="swiper-slide swiper-slide-h" data-hash="slide1">Slide 1</div>
        <div class="swiper-slide swiper-slide-h" data-hash="slide2"style="background-color: darkgray">Slide 3</div>
        <div class="swiper-slide swiper-slide-h">
            <div class="swiper-container" id="sw3" style="height: 600px;">
                <div class="swiper-wrapper">
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-4.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-3.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-2.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/-1.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/0.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/1.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/2.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/3.jpg" /></div>
                    <div class="swiper-slide swiper-slide-v"><img class="slide-v-container" src="res/image_set/Powers of Ten/images/4.jpg" /></div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
            </div>
        </div>
        <div class="swiper-slide swiper-slide-h">Slide 2</div>
        <div class="swiper-slide swiper-slide-h">
            <span id="move">See it moves</span>
        </div>
        <div class="swiper-slide swiper-slide-h">
            <div style="
                position: relative;
                width: 50%;
                height: 50%;
                background-color: wheat;
                border-color: black;
            "><button onclick="alert('yo')">hey</button></div>
        </div>
        <div class="swiper-slide swiper-slide-h">
            <div class="swiper-wrapper" id="sw2">
                <div class="swiper-wrapper">
                    <div class="swiper-slide swiper-slide-v">
                        <div class="slide-v-container">Vertical Slide 1</div>
                    </div>
                    <div class="swiper-slide swiper-slide-v">
                        <div class="slide-v-container">Vertical Slide 1</div>
                    </div>
                    <div class="swiper-slide swiper-slide-v">
                        <div class="slide-v-container">Vertical Slide 1</div>
                    </div>
                    <div class="swiper-slide swiper-slide-v">
                        <div class="slide-v-container">Vertical Slide 1</div>
                    </div>
                    <div class="swiper-slide swiper-slide-v">
                        <div class="slide-v-container">Vertical Slide 1</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="swiper-slide swiper-slide-h">Slide 2</div>
        <div class="swiper-slide swiper-slide-h">Slide 2</div>
        <div class="swiper-slide swiper-slide-h">Slide 2</div>
        <div class="swiper-slide swiper-slide-h">Slide 2</div>
    </div>

    <!-- If we need scrollbar -->
    <div class="swiper-scrollbar"></div>
</div>


<script src="https://unpkg.com/animejs@3.0.0/lib/anime.min.js"></script>
<script src="js/swiper.js"></script>

<script>

    // Helper function to render a dom HTML string
    function render(domHtmlString, targetNode) {
        targetNode.innerHTML = domHtmlString;
    }

    // Helper function to append html dom to a parent
    function appendDom(parentNode, domHtmlString) {
        // const _wrap = document.createElement('div');
        // render(domHtmlString, _wrap);
        // parentNode.appendChild(_wrap);
        parentNode.innerHTML += domHtmlString;
    }

    // Helper function to join path
    function pathJoin(parts, sep){
        var separator = sep || '/';
        var replace = new RegExp(separator+'{1,}', 'g');
        return parts.join(separator).replace(replace, separator);
    }

    function loadImgData(setPath, imageSetData) {
        var ecosysContainer = document.querySelector('div#swiper-container-h').querySelector('.swiper-wrapper');

        // Remove the demo data filled
        while(ecosysContainer.firstChild){
            ecosysContainer.removeChild(ecosysContainer.firstChild);
        }

        for (var setIdx = 0; setIdx < imageSetData.length; setIdx++) {
            var ecoInnerSlideList = '';
            for (var i=0; i<imageSetData[setIdx].imageList.length; i++) {
                const imgPath = pathJoin([setPath, imageSetData[setIdx].path, imageSetData[setIdx].imageList[i]]);
                ecoInnerSlideList +=
                    '<div class="swiper-slide swiper-slide-v">' +
                    '   <img class="slide-v-container" src="'+ imgPath +'"  alt=""/>' +
                    '</div>';
            }

            const slideId = 'slide-' + setIdx;
            appendDom(ecosysContainer,
                '<div class="swiper-slide" data-hash="' + slideId + '">' +
                '    <div class="swiper-container swiper-container-v" id="'+slideId+'">' +
                '        <div class="swiper-wrapper">' +
                            ecoInnerSlideList +
                // '            <div class="swiper-slide swiper-slide-v">' +
                // '               <img class="slide-v-container" src="res/image_set/Powers of Ten/images/-4.jpg" />' +
                // '            </div>' +
                '        </div>' +
                // '        <!-- Add Pagination -->' +
                // '        <div class="swiper-pagination"></div>' +
                '    </div>' +
                '</div>');

            /*swipers.push(new Swiper('#'+slideId, {
                direction: 'vertical',
                effect: 'coverflow',
                slidesPerView: 3,
                // grabCursor: true,
                centeredSlides: true,
                spaceBetween: 5,
                coverflowEffect: {
                    rotate: 20,
                    stretch: 40,
                    depth: 500,
                    modifier: 1,
                    slideShadows : false,
                },
            }));*/
        }

    }

    const imageSetData = [
        {
            name: 'Dune',
            path: 'Dune/Dune Scale Project Images/',
            imageList: [
                '10^-9 DNA molecule.jpg',
                '10^-8 DNA molecule.jpg',
                '10^-7 chromosome.jpg',
                '10^-6 cell nucleus.jpg',
                '10^-5 nucleus.jpg',
                '10^-3 Skull.jpg',
                '10^-2 skin.jpg',
                '10^-1 face.jpg',
                '10^0 human body.jpg',
                '10^1 Paul on worm.jpg',
                '10^2 field.jpg',
                '10^3 Arrakis.jpg',
                '10^4 Freeman culture.jpg',
                '10^5 Melange.jpg',
                '10^6 geology landscape.jpg',
                '10^7 Arrakis.jpg',
                '10^8 Arrakis & Moons.jpg',
                '10^9 two moons orbits.jpg',
                '10^10 Arrakis Orbit.jpg',
                '10^11 Inner Solar System.jpg',
                '10^12 Inner Solar System.jpg',
                '10^13 Solar System.jpg',
                '10^14 Dust Cloud.jpg',
            ]
        },
        {
            name: 'Nausicaa,toxic jungle',
            path: 'Nausicaa,toxic jungle/',
            imageList: [
                '-1.png',
                '0.PNG',
                '1.PNG',
                '2.PNG',
                '3.PNG',
                '4.PNG',
            ]
        },
        {
            name: 'Powers of Ten',
            path: 'Powers of Ten/images/',
            imageList: [
                '-16.jpg', '-15.jpg', '-14.jpg', '-13.jpg', '-12.jpg', '-11.jpg', '-10.jpg', '-9.jpg', '-8.jpg',
                '-7.jpg', '-6.jpg', '-5.jpg', '-4.jpg', '-3.jpg', '-2.jpg', '-1.jpg',
                '0.jpg',
                '1.jpg',
                '2.jpg',
                '3.jpg',
                '4.jpg',
                '5.jpg',
                '6.jpg',
                '7.jpg',
                '8.jpg',
                '9.jpg',
                '10.jpg',
                '11.jpg',
                '12.jpg',
                '13.jpg',
                '14.jpg',
                '15.jpg',
                '16.jpg',
                '17.jpg',
                '18.jpg',
                '19.jpg',
                '20.jpg',
                '21.jpg',
                '22.jpg',
                '23.jpg',
                '24.jpg',
            ]
        }
    ];
    const _testImgSet = imageSetData;//.concat(imageSetData).concat(imageSetData);
    loadImgData('res/image_set', _testImgSet);

    ecoSlides = [];
    for (var i = 0; i < _testImgSet.length; i++) {
        ecoSlides.push(new Swiper('#slide-'+i, {
            direction: 'vertical',
            effect: 'coverflow',
            slidesPerView: 3,
            // grabCursor: true,
            centeredSlides: true,
            spaceBetween: 5,
            coverflowEffect: {
                rotate: 20,
                stretch: 40,
                depth: 500,
                modifier: 1,
                slideShadows : false,
            },
            on: {
                init: function () {
                    this.allowTouchMove = false;
                }
            }
        }));
    }

    lastActiveSlideId = null;

    // init the swiper
    var swiperEco = new Swiper('#swiper-container-h', {
        speed: 400,
        spaceBetween: 20,
        slidesPerView: 4,
        initialSlide: 1,
        centeredSlides: true,
        slideToClickedSlide: true, //click on any slide will produce transition to this slide
        keyboard: {
            enabled: true,
        },
        mousewheel: {
            invert: false,
            releaseOnEdges: true
        },
        hashNavigation: {
            watchState: true,
        },
        scrollbar: {
            el: '.swiper-scrollbar',
            draggable: true,
        },
        breakpoints: {
            1024: {
                slidesPerView: 4,
                spaceBetween: 20,
            },
            640: {
                slidesPerView: 2,
                spaceBetween: 15,
            }
        },
        on: {
            progress: function (progress) {
                console.log('in event "progress":' + progress);
            },
            transitionEnd: function() {
                console.log('on transitionEnd: "realIndex" = ' + this.realIndex);
                if (lastActiveSlideId !== null) ecoSlides[lastActiveSlideId].allowTouchMove = false;
                ecoSlides[this.realIndex].allowTouchMove = true;
                lastActiveSlideId = this.realIndex;
            },
            init: function() {
                const startSlide = this.realIndex || this.params.initialSlide;
                ecoSlides[startSlide].allowTouchMove = true;
                lastActiveSlideId = startSlide;
            }
        }
    });

    /*new Swiper('.swiper-container-v', {
        direction: 'vertical',
        effect: 'coverflow',
        slidesPerView: 3,
        // grabCursor: true,
        centeredSlides: true,
        spaceBetween: 5,
        coverflowEffect: {
            rotate: 20,
            stretch: 40,
            depth: 500,
            modifier: 1,
            slideShadows: false,
        },
    });*/

    /*// Test a basic animation
    var animation = anime({
        targets: '#move',
        translateY: 20,
        elasticity: 200,
        easing: 'easeInOutSine',
        autoplay: false
    });
    animation.seek(0.5 * animation.duration);
*/

</script>

</body>
</html>
